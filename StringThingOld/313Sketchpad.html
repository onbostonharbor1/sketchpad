<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Math-Art Sketchpad</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    canvas { border: 1px solid #333; display: block; margin-bottom: 20px; }
    label { display: block; margin: 5px 0; }
    #tweakPanel label input, select { margin-left: 10px; }
    .gallery { display: flex; flex-wrap: wrap; gap: 10px; }
    .gallery-item { position: relative; cursor: pointer; }
    .gallery-item img { width: 100px; border: 1px solid #ccc; }
    .hover-info {
      position: absolute;
      bottom: 5px;
      left: 5px;
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 4px 6px;
      font-size: 0.75em;
      border-radius: 4px;
      display: none;
      pointer-events: none;
      white-space: pre;
    }
    .gallery-item:hover .hover-info { display: block; }
  </style>
</head>
<body>
<h1>üß† Math-Art Sketchpad</h1>
<canvas id="canvas" width="600" height="600"></canvas>
<label>Select Shape:
  <select id="shapeSelect"></select>
</label>
<div id="tweakPanel"></div>
<button id="saveToGallery">üì∏ Save to Gallery</button>
<h2>üóÇÔ∏è Gallery</h2>
<div id="gallery" class="gallery"></div>
<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const shapeSelect = document.getElementById('shapeSelect');
const tweakPanel = document.getElementById('tweakPanel');
const gallery = document.getElementById('gallery');
const shapeRegistry = {
  modulatedCircle: {
    label: 'Modulated Circle',
    description: 'Wavy perimeter using sine modulation.',
    controls: {
      baseRadius: { type: 'range', min: 50, max: 300, default: 150 },
      modFreq: { type: 'range', min: 1, max: 20, default: 6 },
      modAmp: { type: 'range', min: 0, max: 100, default: 30 }
    },
    createShape: ({ baseRadius, modFreq, modAmp }) => ({
      draw(ctx) {
        ctx.beginPath();
        for (let t = 0; t <= Math.PI * 2; t += 0.01) {
          const r = baseRadius + modAmp * Math.sin(modFreq * t);
          const x = r * Math.cos(t);
          const y = r * Math.sin(t);
          ctx.lineTo(x, y);
        }
        ctx.stroke();
      }
    })
  },
  lissajous: {
    label: 'Lissajous Curve',
    description: 'Oscillating figure-eight using sine waves.',
    controls: {
      A: { type: 'range', min: 10, max: 200, default: 100 },
      B: { type: 'range', min: 10, max: 200, default: 100 },
      a: { type: 'range', min: 1, max: 10, default: 3 },
      b: { type: 'range', min: 1, max: 10, default: 2 },
      delta: { type: 'range', min: 0, max: 6.28, step: 0.01, default: 1.57 }
    },
    createShape: ({ A, B, a, b, delta }) => ({
      draw(ctx) {
        ctx.beginPath();
        for (let t = 0; t <= Math.PI * 2; t += 0.01) {
          const x = A * Math.sin(a * t + delta);
          const y = B * Math.sin(b * t);
          ctx.lineTo(x, y);
        }
        ctx.stroke();
      }
    })
  },
  goldenSpiral: {
    label: 'Golden Spiral',
    description: 'Logarithmic spiral using golden ratio.',
    controls: {
      scale: { type: 'range', min: 1, max: 10, step: 0.1, default: 2 },
      segments: { type: 'range', min: 10, max: 100, default: 50 },
      rotation: { type: 'range', min: 0, max: 6.28, step: 0.01, default: 0 }
    },
    createShape: ({ scale, segments, rotation }) => ({
      draw(ctx) {
        const phi = (1 + Math.sqrt(5)) / 2;
        ctx.beginPath();
        for (let i = 0; i < segments; i++) {
          const angle = i * 0.1 + rotation;
          const radius = scale * Math.pow(phi, angle);
          const x = radius * Math.cos(angle);
          const y = radius * Math.sin(angle);
          ctx.lineTo(x, y);
        }
        ctx.stroke();
      }
    })
  },
  orbitTracer: {
    label: 'Orbit Tracer',
    description: 'Elliptical orbit with eccentricity.',
    controls: {
      eccentricity: { type: 'range', min: 0, max: 0.99, step: 0.01, default: 0.5 },
      semiMajor: { type: 'range', min: 50, max: 300, default: 150 },
      rotation: { type: 'range', min: 0, max: 6.28, step: 0.01, default: 0 }
    },
    createShape: ({ eccentricity, semiMajor, rotation }) => ({
      draw(ctx) {
        const a = semiMajor;
        const b = a * Math.sqrt(1 - eccentricity ** 2);
        ctx.beginPath();
        for (let t = 0; t <= Math.PI * 2; t += 0.01) {
          const x = a * Math.cos(t);
          const y = b * Math.sin(t);
          const xr = x * Math.cos(rotation) - y * Math.sin(rotation);
          const yr = x * Math.sin(rotation) + y * Math.cos(rotation);
          ctx.lineTo(xr, yr);
        }
        ctx.stroke();
      }
    })
  }
};
function renderTweakPanel(shapeType) {
  const config = shapeRegistry[shapeType];
  tweakPanel.innerHTML = `<h3>${config.label}</h3><p>${config.description}</p>`;
  Object.entries(config.controls).forEach(([key, control]) => {
    const input = document.createElement('input');
    input.type = control.type || 'range';
    input.id = key;
    input.value = control.default;
    if (control.min !== undefined) input.min = control.min;
    if (control.max !== undefined) input.max = control.max;
    if (control.step !== undefined) input.step = control.step;
    const label = document.createElement('label');
    label.textContent = key;
    label.appendChild(input);
    tweakPanel.appendChild(label);
    input.addEventListener('input', () => updateShapePreview(shapeType));
  });
  updateShapePreview(shapeType);
}
function updateShapePreview(shapeType) {
  const config = shapeRegistry[shapeType];
  const params = {};
  Object.keys(config.controls).forEach(key => {
    const input = document.getElementById(key);
    params[key] = input.type === 'checkbox' ? input.checked : parseFloat(input.value);
  });
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.save();
  ctx.translate(canvas.width / 2, canvas.height / 2);
  const shape = config.createShape(params);
  shape.draw(ctx);
  ctx.restore();
}
function renderGallery() {
  gallery.innerHTML = '';
  const data = JSON.parse(localStorage.getItem('gallery') || '[]');
  data.forEach((item, index) => {
    const wrapper = document.createElement('div');
    wrapper.className = 'gallery-item';
    const img = new Image();
    img.src = item.image;
    img.title = item.shapeType;
    const info = document.createElement('div');
    info.className = 'hover-info';
    info.textContent = `${item.shapeType}\n` + Object.entries(item.params).map(([k,v]) => `${k}: ${v}`).join('\n');
    wrapper.appendChild(img);
    wrapper.appendChild(info);
    gallery.appendChild(wrapper);
    wrapper.addEventListener('click', () => {
      shapeSelect.value = item.shapeType;
      renderTweakPanel(item.shapeType);
      Object.entries(item.params).forEach(([key, val]) => {
        const input = document.getElementById(key);
        if (input) {
          input.value = input.type === 'checkbox' ? val : val;
          if (input.type === 'checkbox') input.checked = val;
        }
      });
      updateShapePreview(item.shapeType);
    });
  });
}
document.getElementById('saveToGallery').addEventListener('click', () => {
  const shapeType = shapeSelect.value;
  const config = shapeRegistry[shapeType];
  const params = {};
  Object.keys(config.controls).forEach(key => {
    const input = document.getElementById(key);
    params[key] = input.type === 'checkbox' ? input.checked : parseFloat(input.value);
  });
  const snapshot = {
    shapeType,
    params,
    image: canvas.toDataURL()
  };
  const galleryData = JSON.parse(localStorage.getItem('gallery') || '[]');
  galleryData.push(snapshot);
  localStorage.setItem('gallery', JSON.stringify(galleryData));
  renderGallery();
});
// Populate shape dropdown
Object.keys(shapeRegistry).forEach(key => {
  const option = document.createElement('option');
  option.value = key;
  option.textContent = shapeRegistry[key].label;
  shapeSelect.appendChild(option);
});
// Initial render
shapeSelect.addEventListener('change', () => {
  renderTweakPanel(shapeSelect.value);
});
renderTweakPanel(shapeSelect.value);
renderGallery();
</script>
</body>
</html>


